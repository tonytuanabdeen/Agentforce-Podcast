!function(){"use strict";const t="webruntime";function e(e){return`/${t}${e}`}const o=e("/log/metrics"),n=e("/log/errors");function a(t,e){const o=JSON.stringify(e);if(!(window&&window.navigator&&window.navigator.sendBeacon&&window.navigator.sendBeacon(t,o))){const e=new XMLHttpRequest;e.open("POST",t,!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(o)}}function r(t){return document?.querySelector(`meta[name="${t}"]`)?.getAttribute("content")||""}function s(){return r("basePath")}function i(){return r("deployTarget")||"CORE"}const l=`${t}-app-bootstrap`;function c(t){!function(t){const e=t?.detail||{};e.name=e.name||"",e.duration=e.duration||"",l===e.name&&(e.deployTarget=i(),a(s()+o,{webruntimeBootstrap:e,info:"lwr.bootstrap.end"}))}(t),globalThis?.removeEventListener("bootstrapLoaded",this)}globalThis?.addEventListener("bootstrapLoaded",c),globalThis.LWR=globalThis.LWR||{},globalThis.LWR&&Object.isExtensible(globalThis.LWR)&&(globalThis.LWR.onError=t=>{!function(t){const{message:e,stack:o,wcstack:r}=t,{pathname:l,hostname:c}=globalThis.location;a(s()+n,{subject:"bootstrap error",webruntimeBootstrap:{deployTarget:i()},message:e,stack:o,wcstack:r,location:{pathname:l,hostname:c}})}(t),globalThis.launchModal&&launchModal({id:"webruntime-client-bootstrap-error-failed-to-load-lwr",titleLabel:"Oops!",contentLabel:"Something went wrong. Please try refreshing the app",buttonLabel:"Refresh",callback:function(){var t=new URL(window.location);t.searchParams.set("lwr.cachebust",(new Date).getTime()),window.location=t.href}}),globalThis?.removeEventListener("bootstrapLoaded",c),globalThis?.dispatchEvent(new CustomEvent("removeErrorReporting")),delete globalThis.LWR.onError})}();
